<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jeopardy Game</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #001f3f;
      color: white;
      padding: 2rem;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin-bottom: 2rem;
    }
    .cell {
      background-color: #0074D9;
      border: 2px solid #fff;
      padding: 1rem;
      font-weight: bold;
      cursor: pointer;
    }
    .category {
      background-color: #3D9970;
      font-size: 1rem;
    }
    .controls, .players, .final {
      margin: 1rem 0;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      margin: 0.3rem;
      cursor: pointer;
    }
    .score {
      margin: 0.5rem 0;
    }
    .player-container {
      margin-bottom: 1rem;
    }
    input[type=number] {
      width: 60px;
      font-size: 1rem;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Jeopardy!</h1>

  <div class="controls">
    <label for="playerCount">Number of Players (1–4):</label>
    <input type="number" id="playerCount" min="1" max="4" value="2">
    <button onclick="startGame()">Start Game</button>
  </div>

  <div class="players" id="players"></div>

  <div class="controls hidden" id="gameControls">
    <button onclick="generateBoard(false)">New Board</button>
    <button onclick="generateBoard(true)">Double Jeopardy</button>
    <button onclick="prepareFinalJeopardy()">Final Jeopardy</button>
  </div>

  <div class="board" id="board"></div>

  <div class="final hidden" id="finalSection">
    <h2>Final Jeopardy</h2>
    <div id="wagerInputs"></div>
    <button onclick="revealFinalClue()">Reveal Final Clue</button>
    <div id="finalClue" class="hidden"></div>
  </div>

  <script>
    const allCategories = [
      "U.S. Presidents", "World History", "Science", "Literature", "Pop Culture",
      "Sports", "Geography", "Word Origins", "Movies", "TV Shows", "Animals",
      "Mythology", "Music", "Food & Drink", "Famous Quotes", "Inventions",
      "Technology", "Art", "Business", "Mathematics", "Politics", "Language",
      "The Bible", "Astronomy", "Comics", "Fashion", "Video Games", "Opera", "Economics"
    ];

    let players = [];
    let scores = {};
    let dailyDouble = "";
    let finalCategory = "";
    let finalClue = "";

    function getRandomCategories(list, count) {
      const shuffled = [...list].sort(() => 0.5 - Math.random());
      return shuffled.slice(0, count);
    }

    function startGame() {
      const count = parseInt(document.getElementById('playerCount').value);
      if (count < 1 || count > 4) return alert("Choose between 1 and 4 players.");

      const playersDiv = document.getElementById('players');
      playersDiv.innerHTML = "";
      players = [];
      scores = {};

      for (let i = 1; i <= count; i++) {
        const name = `Player ${i}`;
        players.push(name);
        scores[name] = 0;

        const playerDiv = document.createElement('div');
        playerDiv.className = 'player-container';
        playerDiv.innerHTML = `
          <h3>${name}</h3>
          <p class="score" id="score-${name}">Score: $0</p>
        `;
        playersDiv.appendChild(playerDiv);
      }

      document.getElementById('gameControls').classList.remove('hidden');
      generateBoard(false);
    }

    function updateScore(player, amount) {
      scores[player] += amount;
      const scoreElem = document.getElementById(`score-${player}`);
      scoreElem.textContent = `Score: $${scores[player]}`;
    }

    function generateBoard(isDouble) {
      const board = document.getElementById('board');
      board.innerHTML = "";
      document.getElementById('finalSection').classList.add('hidden');

      const categories = getRandomCategories(allCategories, 6);
      const values = isDouble ? [400, 800, 1200, 1600, 2000] : [200, 400, 600, 800, 1000];

      const ddCol = Math.floor(Math.random() * 6);
      const ddRow = Math.floor(Math.random() * 5);
      dailyDouble = `${ddCol}-${ddRow}`;

      categories.forEach(cat => {
        const header = document.createElement('div');
        header.className = 'cell category';
        header.textContent = cat;
        board.appendChild(header);
      });

      for (let row = 0; row < 5; row++) {
        for (let col = 0; col < 6; col++) {
          const value = values[row];
          const cell = document.createElement('div');
          const key = `${col}-${row}`;
          cell.className = 'cell';
          cell.dataset.key = key;
          cell.dataset.value = value;
          cell.dataset.col = col;
          cell.dataset.row = row;
          cell.textContent = `$${value}`;

          cell.onclick = () => {
            if (cell.dataset.key === dailyDouble) {
              cell.innerHTML = `<strong>DAILY DOUBLE!</strong>`;
              cell.style.backgroundColor = "#FF4136";
            } else {
              const clue = `Clue: ${categories[col]} - $${value}`;
              cell.innerHTML = `${clue}<br><br>` + players.map(player => `
                <button onclick="updateScore('${player}', ${value})">✔ ${player}</button>
                <button onclick="updateScore('${player}', -${value})">✖ ${player}</button>
              `).join("<br>");
            }
            cell.onclick = null;
          };
          board.appendChild(cell);
        }
      }
    }

    function prepareFinalJeopardy() {
      finalCategory = getRandomCategories(allCategories, 1)[0];
      finalClue = `This is your Final Jeopardy clue in the category "${finalCategory}".`;

      const wagerDiv = document.getElementById('wagerInputs');
      wagerDiv.innerHTML = "";
      players.forEach(player => {
        wagerDiv.innerHTML += `
          <div>
            ${player} wager: $<input type="number" id="wager-${player}" min="0" max="${scores[player]}" value="0">
          </div>
        `;
      });

      document.getElementById('finalClue').classList.add('hidden');
      document.getElementById('finalSection').classList.remove('hidden');
    }

    function revealFinalClue() {
      const clueDiv = document.getElementById('finalClue');
      clueDiv.classList.remove('hidden');
      clueDiv.innerHTML = `
        <h3>Final Jeopardy Category: ${finalCategory}</h3>
        <p>${finalClue}</p>
        <hr>
        ${players.map(player => `
          <button onclick="updateScore('${player}', parseInt(document.getElementById('wager-${player}').value || 0))">✔ ${player}</button>
          <button onclick="updateScore('${player}', -parseInt(document.getElementById('wager-${player}').value || 0))">✖ ${player}</button>
        `).join("<br><br>")}
      `;
    }
  </script>
</body>
</html>